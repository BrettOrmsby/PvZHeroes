import{d as y,x as D,l as x,n as v,o as d,c as u,a as t,j as i,y as C,e as s,v as w,k as f,z as S,p as I,g as N,t as _,f as z,i as U}from"./index-c8754979.js";import{h as c}from"./heros-d35dfa39.js";import{s as $,a as L}from"./button.esm-fb621828.js";import{s as B,a as E,b as H}from"./dropdown.esm-04eadf22.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";import"./overlayeventbus.esm-45998347.js";const m=n=>(I("data-v-b42bb9da"),n=n(),N(),n),R={class:"container"},j=m(()=>t("h1",null,"Create a Deck",-1)),A=m(()=>t("label",{for:"name"},"Name",-1)),G={key:0,id:"invalidName",class:"p-error"},q=m(()=>t("span",{id:"heroLabel"},"Hero",-1)),F={key:0,class:"hero-select-container"},J=["alt","src"],K={key:1},O={class:"hero-select-container"},P=["alt","src"],Q=m(()=>t("label",{for:"description"},"Description",-1)),T={name:"CreateDeck"},W=y({...T,setup(n){const h=D(),{supabase:b}=U(),{id:V}=x(),r=v(!1),p=v(!1),o=v({name:"",hero:"Green Shadow",description:"",isPrivate:!1}),g=async()=>{if(o.value.name.trim()===""){r.value=!0;return}else r.value=!1;p.value=!0;const{error:l,data:a}=await b.from("decks").insert({creator:V.value,name:o.value.name,hero:o.value.hero,description:o.value.description,is_private:o.value.isPrivate,is_complete:!1,list:{}}).select("id").single();if(p.value=!1,l){z(l);return}h.push({name:"ViewDeck",params:{id:a.id}})},k=l=>[...c.plants,...c.zombies].find(a=>a.name===l);return(l,a)=>(d(),u("div",R,[j,t("form",{onSubmit:a[4]||(a[4]=S(e=>g(),["prevent"]))},[A,i(s($),{id:"name",type:"text",modelValue:o.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value.name=e),class:C({"p-invalid":r.value}),maxlength:"50"},null,8,["modelValue","class"]),r.value?(d(),u("small",G,"Must include a name.")):w("",!0),q,i(s(B),{modelValue:o.value.hero,"onUpdate:modelValue":a[1]||(a[1]=e=>o.value.hero=e),options:[...s(c).plants,...s(c).zombies],optionLabel:"name",optionValue:"name",placeholder:"Select a Hero"},{value:f(e=>[e.value?(d(),u("div",F,[t("img",{alt:e.value,src:k(e.value).image,class:"hero-image"},null,8,J),t("div",null,_(e.value),1)])):(d(),u("span",K,_(e.placeholder),1))]),option:f(e=>[t("div",O,[t("img",{alt:e.option.name,src:e.option.image,class:"hero-image"},null,8,P),t("div",null,_(e.option.name),1)])]),_:1},8,["modelValue","options"]),Q,i(s(E),{id:"description",autoResize:!0,modelValue:o.value.description,"onUpdate:modelValue":a[2]||(a[2]=e=>o.value.description=e),maxlength:"150"},null,8,["modelValue"]),i(s(H),{modelValue:o.value.isPrivate,"onUpdate:modelValue":a[3]||(a[3]=e=>o.value.isPrivate=e),onLabel:"Private",offLabel:"Public",onIcon:"pi pi-lock",offIcon:"pi pi-globe"},null,8,["modelValue"]),i(s(L),{label:"Create Deck",type:"submit",loading:p.value},null,8,["loading"])],32)]))}});const te=M(W,[["__scopeId","data-v-b42bb9da"]]);export{te as default};
